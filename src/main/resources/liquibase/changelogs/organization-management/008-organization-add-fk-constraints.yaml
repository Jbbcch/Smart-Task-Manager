databaseChangeLog:
  - changeSet:
      id: organization-add-fk-001
      author: Jbbcch
      preConditions:
        onFail: MARK_RAN
        not:
          - foreignKeyConstraintExists:
              foreignKeyName: fk_user_roles_roles
      changes:
        - addForeignKeyConstraint:
            baseTableSchemaName: organization_management
            baseTableName: user_roles
            baseColumnNames: role_id
            referencedTableSchemaName: organization_management
            referencedTableName: roles
            referencedColumnNames: id
            constraintName: fk_user_roles_roles
            onDelete: CASCADE

  - changeSet:
      id: organization-add-fk-002
      author: Jbbcch
      preConditions:
        onFail: MARK_RAN
        not:
          - foreignKeyConstraintExists:
              foreignKeyName: fk_user_roles_users
      changes:
        - addForeignKeyConstraint:
            baseTableSchemaName: organization_management
            baseTableName: user_roles
            baseColumnNames: user_id
            referencedTableSchemaName: organization_management
            referencedTableName: users
            referencedColumnNames: id
            constraintName: fk_user_roles_users
            onDelete: CASCADE

  - changeSet:
      id: organization-add-fk-003
      author: Jbbcch
      preConditions:
        onFail: MARK_RAN
        not:
          - foreignKeyConstraintExists:
              foreignKeyName: fk_role_permissions_roles
      changes:
        - addForeignKeyConstraint:
            baseTableSchemaName: organization_management
            baseTableName: role_permissions
            baseColumnNames: role_id
            referencedTableSchemaName: organization_management
            referencedTableName: roles
            referencedColumnNames: id
            constraintName: fk_role_permissions_roles
            onDelete: CASCADE

  - changeSet:
      id: organization-add-fk-004
      author: Jbbcch
      preConditions:
        onFail: MARK_RAN
        not:
          - foreignKeyConstraintExists:
              foreignKeyName: fk_department_users_departments
      changes:
        - addForeignKeyConstraint:
            baseTableSchemaName: organization_management
            baseTableName: department_users
            baseColumnNames: department_id
            referencedTableSchemaName: organization_management
            referencedTableName: departments
            referencedColumnNames: id
            constraintName: fk_department_users_departments
            onDelete: CASCADE

  - changeSet:
      id: organization-add-fk-005
      author: Jbbcch
      preConditions:
        onFail: MARK_RAN
        not:
          - foreignKeyConstraintExists:
              foreignKeyName: fk_department_users_users
      changes:
        - addForeignKeyConstraint:
            baseTableSchemaName: organization_management
            baseTableName: department_users
            baseColumnNames: user_id
            referencedTableSchemaName: organization_management
            referencedTableName: users
            referencedColumnNames: id
            constraintName: fk_department_users_users
            onDelete: CASCADE